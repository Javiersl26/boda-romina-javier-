<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda — Romina & Javier · 15 de noviembre de 2025</title>
  <meta name="description" content="Invitación de boda de Romina Gabriela Laura Rodriguez y Javier Rodrigo Manuel Sarmiento Lopez. Ceremonia, recepción, regalos, recuerdos y RSVP." />
  <meta name="theme-color" content="#29392F" />
  <meta name="robots" content="noindex,nofollow" />

  <!-- Open Graph / Twitter (URLs absolutas) -->
  <meta property="og:title" content="Boda · Romina & Javier · 15/11/2025" />
  <meta property="og:description" content="Toda la información: ceremonia, recepción, regalos, recuerdos y RSVP." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://javiersl26.github.io/" />
  <meta property="og:image" content="https://javiersl26.github.io/imagenes/IMG-20250712-WA0111.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Boda · Romina & Javier · 15/11/2025" />
  <meta name="twitter:description" content="Detalles, mapas, regalos, recuerdos y RSVP." />
  <meta name="twitter:image" content="https://javiersl26.github.io/imagenes/IMG-20250712-WA0111.jpg" />

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any" />

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <!-- (Mantenemos Inter + Cormorant del refactor editorial) -->
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet" />

  <style>
    /* =========================================================
       TOKENS (sin cambiar paleta; + mejoras de compatibilidad)
       ========================================================= */
    :root{
      --pine:#29392F;         /* títulos/marca */
      --olive:#8D8E7C;        /* acentos sutiles */
      --champagne:#F0DAB8;    /* paneles/bordes/focus */
      --blush:#EFBFBB;        /* secundarios/acento */
      --ivory:#F5EDE1;        /* fondo base */
      --ink:#1E2723;          /* texto sobre ivory */
      --line:#E9E2D6;         /* divisores */

      /* Derivados */
      --pine-hover: color-mix(in oklab, var(--pine) 85%, white);
      --pine-active: color-mix(in oklab, var(--pine) 75%, black);
      /* Mejora de contraste hover secundario solicitada */
      --olive-hover:#6F735E;

      --radius:16px;
      --shadow:0 6px 20px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box}
    html,body{margin:0}
    html{scroll-behavior:smooth}
    body{
      background:var(--ivory); color:var(--ink);
      font-family:Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
      line-height:1.6; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
      font-size:clamp(16px,1.7vw,18px);
    }

    /* Titulares (editorial) */
    h1,h2,h3{margin:0 0 12px; color:var(--pine); letter-spacing:.3px}
    h1{font-family:"Cormorant Garamond", ui-serif, Georgia, serif; font-weight:700; font-size:clamp(48px,8vw,60px)}
    h2{font-family:"Cormorant Garamond", ui-serif, Georgia, serif; font-weight:700; font-size:clamp(28px,3.4vw,32px)}
    h3{font-family:"Cormorant Garamond", ui-serif, Georgia, serif; font-weight:600; font-size:clamp(22px,2.4vw,24px)}

    a{color:var(--pine); text-decoration:none}
    a:hover{ text-decoration:underline; text-decoration-color:var(--champagne); text-decoration-thickness:2px; text-underline-offset:3px }
    a:focus-visible, .btn:focus-visible{ outline:3px solid color-mix(in oklab, var(--champagne), black 10%); outline-offset:3px; border-radius:12px }

    .wrap{max-width:1120px; margin:0 auto; padding:32px 20px}
    .grid{display:grid; gap:18px}
    @media (min-width:768px){ .cols-2{grid-template-columns:1fr 1fr} }

    /* Chips/etiquetas (se mantienen para otras zonas) */
    .chip{
      display:inline-block; background:var(--champagne); color:var(--pine);
      border-radius:9999px; padding:4px 10px; font-size:.95rem; line-height:1; font-weight:500;
    }

    /* Tarjetas */
    .card{
      background:var(--ivory); border:1px solid var(--line); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow);
    }

    /* =========================================================
       BOTONES (primario/secundario con estados + contraste)
       ========================================================= */
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      min-height:44px; padding:12px 20px; border-radius:9999px;
      font-family:Inter, ui-sans-serif; font-weight:500; letter-spacing:.6px;
      border:1px solid transparent; cursor:pointer; user-select:none;
      transition: transform .08s ease, background-color .15s ease, color .15s ease, border-color .15s ease;
      text-decoration:none;
    }
    .btn:active{ transform: translateY(1px) }
    .btn[disabled]{ opacity:.45; pointer-events:none }

    .btn-primary{ background:var(--pine); color:var(--ivory); border:1.5px solid var(--champagne) }
    /* Fallback sin color-mix */
    .btn-primary:hover{ background:#E5D6B5; color:var(--pine); border-color:#DCC8A2 }
    /* Versión avanzada con color-mix */
    @supports (color: color-mix(in oklab, white, black)){
      .btn-primary:hover{ background:var(--pine-hover); color:var(--ivory); border-color:var(--pine-hover) }
    }
    .btn-primary:active{ background:var(--pine-active); color:var(--ivory) }

    .btn-secondary{ background:var(--blush); color:var(--pine); border:1px solid color-mix(in oklab, var(--blush) 85%, var(--champagne)) }
    .btn-secondary:hover{ background:var(--olive-hover); color:#FFFFFF; border-color:var(--olive-hover) }

    .btn-group{display:flex; gap:10px; flex-wrap:wrap}
    .btn-group .btn{ flex:1 1 260px }
    @media (max-width:520px){ .btn{ width:100% } }

    /* =========================================================
       NAV (con iconos decorativos aria-hidden)
       ========================================================= */
    nav{
      background:#F5EDE1; /* Fallback */
      position:sticky; top:0; z-index:20;
      border-bottom:1px solid var(--line); display:flex; gap:6px; overflow:auto; padding:8px 10px;
      backdrop-filter:saturate(160%) blur(8px);
    }
    /* Versión con color-mix cuando está disponible */
    @supports (color: color-mix(in oklab, white, black)){
      nav{ background:color-mix(in oklab, white 80%, var(--champagne) 20%) }
    }
    .nav-item{ display:inline-flex; align-items:center; gap:8px; color:var(--pine); padding:8px 12px; border-radius:12px; text-decoration:none; white-space:nowrap }
    .nav-item svg{ width:18px; height:18px; stroke:currentColor; fill:none; stroke-width:1.8; stroke-linecap:round; stroke-linejoin:round }
    .nav-item:hover{ background: color-mix(in oklab, var(--champagne) 35%, white) }
    .nav-item.active{ background: color-mix(in oklab, var(--champagne) 50%, white); box-shadow: inset 0 0 0 1px var(--line) }

    /* =========================================================
       HERO (veladura + caja translúcida del título)
       ========================================================= */
    header.hero{ position:relative; min-height:78vh; display:grid; place-items:center; text-align:center; overflow:hidden; color:#fff; isolation:isolate }
    .hero .bg{ position:absolute; inset:0; object-fit:cover; width:100%; height:100%; z-index:-2; transition:opacity 1s ease }
    .hero .bg:not(.active){ opacity:0 }
    header.hero::after{
      content:""; position:absolute; inset:0; z-index:-1;
      background: linear-gradient(to bottom,
        color-mix(in oklab, var(--pine), transparent 65%),
        transparent 15%);
    }

    /* Apilar en columna dentro del hero */
    .hero .inner{
      display:flex;
      flex-direction:column;
      align-items:center;          /* centra horizontalmente */
    }

    /* Caja del nombre (ajusta opacidad aquí) */
    .title-wrap{
      display:block;               /* para que no intente ir en línea con la fecha */
      background: rgba(245,237,225,.45); /* ivory translúcido */
      border-radius:14px; padding:8px 14px;
      backdrop-filter:saturate(120%) blur(2px);
    }

    /* separación vertical entre hijos del .inner */
    .hero .inner > * + *{ margin-top:8px }
    
    .date-tile{
      display:inline-grid; grid-template-columns:auto auto auto; gap:10px; align-items:center;
      background:rgba(240,218,184,.45); color:#2b2b2b; border-radius:16px; padding:10px 18px;
      font-weight:600; letter-spacing:.3px; border:1px solid rgba(224,206,170,.8);
      box-shadow:0 2px 12px rgba(41,57,47,.10);
    }
    .date-tile .big{font-size:clamp(30px,6vw,46px); font-weight:700}
    .countdown{ font-weight:700 }

    /* =========================================================
       MAPAS + ACCIONES (1 columna siempre)
       ========================================================= */
    .map-embed{ position:relative; padding-top:56.25%; border-radius:12px; overflow:hidden; border:1px solid var(--line); background:#fff }
    .map-embed iframe{ position:absolute; inset:0; width:100%; height:100%; border:0 }
    .loc-grid{ display:grid; gap:16px; grid-template-columns:1fr; align-items:start }
    .map-embed{ order:1 }
    .loc-grid .btn-group{ order:2 }

    /* =========================================================
       RECUERDOS (video + galería)
       ========================================================= */
    .video-card video{ width:100%; border-radius:12px; border:1px solid var(--line); display:block }
    .gallery{ display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)) }
    .gallery img{ width:100%; height:220px; object-fit:cover; border-radius:12px; border:1px solid var(--line); background:#fff; transition: transform .2s ease, box-shadow .2s ease }
    .gallery img:hover{ transform:scale(1.01); box-shadow:var(--shadow) }
    dialog#lightbox{ border:none; padding:0; max-width:min(95vw,1100px); background:transparent }
    dialog#lightbox::backdrop{ background:rgba(0,0,0,.6) }
    .lightbox-img{ max-width:95vw; max-height:85vh; border-radius:12px; border:1px solid var(--line) }

    /* Paneles destacados (Regalos / RSVP) con fallback */
    .panel{ background:#F6EAD4; border:1px solid var(--line); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow) }
    @supports (color: color-mix(in oklab, white, black)){
      .panel{ background:color-mix(in oklab, var(--champagne) 20%, white) }
    }

    /* Footer oscuro */
    footer{ padding:28px 16px; text-align:center; background:var(--pine); color:#F5F5F5 }
    footer a{ color:#F5F5F5; text-decoration:underline; text-decoration-color:var(--champagne); text-underline-offset:3px; text-decoration-thickness:2px }

    /* Accesibilidad de movimiento/contraste */
    @media (prefers-reduced-motion: reduce){
      .hero .bg{ transition:none } .gallery img:hover{ transform:none; box-shadow:none }
    }
    @media (prefers-contrast: more){
      .card, .panel{ border-width:2px }
      body{ color: var(--pine-active) }
    }

    /* Utilidad para lectores de pantalla (estado de copiado) */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
  </style>
</head>
<body>
  <!-- ================= HERO ================= -->
  <header class="hero" id="hero" aria-label="Portada">
    <img class="bg active" src="imagenes/IMG-20250712-WA0111.jpg" alt="" width="1600" height="1066" decoding="async" fetchpriority="high" />
    <img class="bg" src="imagenes/IMG-20250714-WA0094.jpg" alt="" width="1600" height="1066" decoding="async" />
    <div class="inner">
      <!-- Título con caja translúcida (sin chip dress code) -->
      <div class="title-wrap">
        <h1>Romina & Javier</h1>
      </div>
        <div class="date-tile" aria-label="Fecha del evento">
          <span class="muted">NOV</span>
          <span class="big">15</span>
          <span class="muted">2025</span>
        </div>
      
    
      <div class="countdown" id="countdown" aria-live="polite"></div>
      <div>
        <a class="btn btn-primary" href="#rsvp" rel="noopener">Confirmar asistencia</a>
      </div>
    </div>
  </header>

  <!-- ================= NAV (con 'Recuerdos') ================= -->
  <nav aria-label="Navegación" id="nav">
    <a href="#detalles" class="nav-item" data-section="detalles" title="Detalles">
      <svg aria-hidden="true" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4M12 8h.01"/></svg> Detalles
    </a>
    <a href="#ceremonia" class="nav-item" data-section="ceremonia" title="Ceremonia">
      <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M12 2v6M9 5h6M4 22V12l8-4 8 4v10M9 22v-6a3 3 0 0 1 6 0v6"/></svg> Ceremonia
    </a>
    <a href="#recepcion" class="nav-item" data-section="recepcion" title="Recepción">
      <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M8 7h8l-1 4a5 5 0 0 1-6 0L8 7Zm4 8v6M6 21h12"/></svg> Recepción
    </a>
    <a href="#recuerdos" class="nav-item" data-section="recuerdos" title="Recuerdos">
      <svg aria-hidden="true" viewBox="0 0 24 24"><rect x="3" y="5" width="14" height="14" rx="2"/><path d="M17 8l4-2v12l-4-2z"/></svg> Recuerdos
    </a>
    <a href="#regalos" class="nav-item" data-section="regalos" title="Regalos">
      <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M20 12v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8M2 7h20M12 22V7"/><path d="M12 7H7a2 2 0 0 1 0-4c3 0 5 4 5 4Z"/><path d="M12 7h5a2 2 0 0 0 0-4c-3 0-5 4-5 4Z"/></svg> Regalos
    </a>
    <a href="#rsvp" class="nav-item" data-section="rsvp" title="RSVP">
      <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M20 6 9 17l-5-5"/></svg> RSVP
    </a>
  </nav>

  <!-- ================= DETALLES (incluye Guardar fecha) ================= -->
  <section id="detalles" class="wrap section">
    <div class="card cols-2 grid">
      <div>
        <h2>Detalles</h2>
        <p><strong>Novios</strong><br>
          Romina Gabriela Laura Rodriguez<br>
          Javier Rodrigo Manuel Sarmiento Lopez</p>
        <p><strong>Fecha</strong> · 15 de noviembre de 2025</p>

        <div class="btn-group" style="margin:10px 0 6px">
          <!-- Guardar la fecha — ÚNICO LUGAR -->
          <a class="btn btn-secondary" id="addCal" download="Boda-Romina-Javier.ics" href="" rel="noopener">Guardar la fecha (.ics)</a>
        </div>

        <p class="chip" style="margin-top:6px">Dress code: Elegante</p>
        <p class="muted" style="margin-top:8px">Hemos reservado pases para ti. ¡Te esperamos!</p>
      </div>
      <div>
        <h3 class="muted" style="margin-bottom:8px">Itinerario</h3>
        <ul class="muted" style="margin-top:6px">
          <li> <strong>12:00 p.m.</strong> — Inicio de la ceremonia</li>
          <li> <strong>Recepción</strong> — posterior a la ceremonia</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ================= CEREMONIA ================= -->
  <section id="ceremonia" class="wrap section">
    <div class="card">
      <h2>Ceremonia</h2>
      <p><strong>Iglesia</strong> · Parroquia Nuestra Señora del Carmen</p>
      <p><strong>Dirección</strong><br>Juan de la Fuente, Miraflores 15047, Perú</p>

      <!-- Orden DOM: mapa -> botones -->
      <div class="loc-grid" style="margin-top:12px">
        <div class="map-embed" aria-label="Mapa de la iglesia">
          <iframe loading="lazy" allowfullscreen
            src="https://maps.google.com/maps?q=Juan%20de%20la%20Fuente,%20Miraflores%2015047,%20Per%C3%BA&t=m&z=17&output=embed&iwloc=near">
          </iframe>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-secondary copy" data-copy="Juan de la Fuente, Miraflores 15047, Perú" aria-label="Copiar dirección de la iglesia">Copiar dirección</button>
          <a class="btn btn-secondary" target="_blank" rel="noopener"
            href="https://www.google.com/maps/dir/?api=1&destination=Juan%20de%20la%20Fuente%2C%20Miraflores%2015047%2C%20Per%C3%BA">Cómo llegar</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= RECEPCIÓN ================= -->
  <section id="recepcion" class="wrap section">
    <div class="card">
      <h2>Recepción</h2>
      <p><strong>Dirección</strong><br>Av. Club Golf Los Incas 222, Surco</p>

      <!-- Orden DOM: mapa -> botones -->
      <div class="loc-grid" style="margin-top:12px">
        <div class="map-embed" aria-label="Mapa de la recepción">
          <iframe loading="lazy" allowfullscreen
            src="https://maps.google.com/maps?q=Av.%20Club%20Golf%20Los%20Incas%20222,%20Surco,%20Lima,%20Per%C3%BA&t=m&z=17&output=embed&iwloc=near">
          </iframe>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-secondary copy" data-copy="Av. Club Golf Los Incas 222, Surco" aria-label="Copiar dirección de la recepción">Copiar dirección</button>
          <a class="btn btn-secondary" target="_blank" rel="noopener"
            href="https://www.google.com/maps/dir/?api=1&destination=Av.%20Club%20Golf%20Los%20Incas%20222%2C%20Surco%2C%20Lima%2C%20Per%C3%BA">Cómo llegar</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= RECUERDOS (video + fotos) ================= -->
  <section id="recuerdos" class="wrap section">
    <h2>Recuerdos</h2>

    <!-- Video (opcional) -->
    <div class="card video-card" style="margin-bottom:18px">
      <video controls playsinline preload="metadata" poster="imagenes/IMG-20250712-WA0111.jpg">
        <source src="media/video.mp4" type="video/mp4">
        Tu navegador no soporta video HTML5.
      </video>
      <p class="muted">Sugerido: 15–30 segundos, MP4 (H.264), 1080p, &lt; 20&nbsp;MB.</p>
    </div>

    <!-- Galería -->
    <div class="gallery" aria-label="Galería">
      <img src="imagenes/IMG-20250712-WA0111.jpg" alt="Romina y Javier" loading="lazy" decoding="async">
      <img src="imagenes/IMG-20250714-WA0094.jpg" alt="Sesión de pareja" loading="lazy" decoding="async">
      <img src="imagenes/Imagen%20de%20WhatsApp%202025-08-29%20a%20las%2019.21.24_caaa55f7.jpg" alt="Feliz momento juntos" loading="lazy" decoding="async">
      <img src="imagenes/Imagen%20de%20WhatsApp%202025-08-29%20a%20las%2019.21.43_82f709c3.jpg" alt="Recuerdo especial" loading="lazy" decoding="async">
    </div>
  </section>

  <!-- ================= REGALOS ================= -->
  <section id="regalos" class="wrap section">
    <div class="panel">
      <h2>Cuenta para regalos</h2>
      <p class="muted">Nos sentimos bendecidos de tenerte en nuestra vida y poder compartir este día tan especial contigo. Si consideras hacernos un obsequio, nuestras opciones son:</p>

      <div class="grid cols-2" style="margin-top:10px">
        <div class="card">
          <h3>Interbank — <span class="muted">DÓLARES</span></h3>
          <p style="margin:6px 0"><strong>Cuenta</strong> ·
            <button type="button" class="btn btn-secondary copy" data-copy="898 3184906814" aria-label="Copiar número de cuenta en dólares">898 3184906814</button>
          </p>
          <p style="margin:6px 0"><strong>CCI</strong> ·
            <button type="button" class="btn btn-secondary copy" data-copy="00389801318490681446" aria-label="Copiar CCI en dólares">00389801318490681446</button>
          </p>
        </div>

        <div class="card">
          <h3>Interbank — <span class="muted">SOLES</span></h3>
          <p style="margin:6px 0"><strong>Cuenta</strong> ·
            <button type="button" class="btn btn-secondary copy" data-copy="200 3122648627" aria-label="Copiar número de cuenta en soles">200 3122648627</button>
          </p>
          <p style="margin:6px 0"><strong>CCI</strong> ·
            <button type="button" class="btn btn-secondary copy" data-copy="00320001312264862735" aria-label="Copiar CCI en soles">00320001312264862735</button>
          </p>
        </div>
      </div>

      <p class="muted" style="margin-top:10px">A nombre de <strong>Javier Sarmiento</strong>.</p>
    </div>
  </section>

  <!-- ================= RSVP ================= -->
  <section id="rsvp" class="wrap section">
    <div class="panel">
      <h2>Confirmar asistencia (RSVP)</h2>
      <p>Por favor confirma tu asistencia.</p>
      <div class="btn-group" style="margin-top:10px">
        <a class="btn btn-primary" href="https://docs.google.com/forms/d/ID_DE_TU_FORM/viewform" target="_blank" rel="noopener">Abrir formulario</a>
        <a class="btn btn-secondary" href="https://wa.me/51XXXXXXXXX?text=Hola%2C%20confirmo%20mi%20asistencia%20a%20la%20boda%20de%20Romina%20y%20Javier%20el%2015%2F11%2F2025" target="_blank" rel="noopener">Confirmar por WhatsApp</a>
      </div>
    </div>
  </section>

  <footer>
    Hecho con ❤️ por Romina & Javier · <a href="#rsvp">RSVP</a>
  </footer>

  <!-- JSON-LD Evento (conjunto) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Boda de Romina & Javier",
    "startDate": "2025-11-15T12:00:00-05:00",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "eventStatus": "https://schema.org/EventScheduled",
    "location": [{
      "@type": "Place",
      "name": "Parroquia Nuestra Señora del Carmen",
      "address": "Juan de la Fuente, Miraflores 15047, Perú"
    },{
      "@type": "Place",
      "name": "Recepción",
      "address": "Av. Club Golf Los Incas 222, Surco"
    }],
    "image": [
      "https://javiersl26.github.io/imagenes/IMG-20250712-WA0111.jpg",
      "https://javiersl26.github.io/imagenes/IMG-20250714-WA0094.jpg"
    ],
    "description": "Invitación de boda. Dress code: Elegante.",
    "isAccessibleForFree": true
  }
  </script>

  <div id="copyStatus" class="sr-only" aria-live="polite"></div>

  <script>
    /* Crossfade del hero */
    const heroImgs = Array.from(document.querySelectorAll('.hero .bg'));
    let hi = 0;
    setInterval(()=>{ heroImgs[hi].classList.remove('active'); hi=(hi+1)%heroImgs.length; heroImgs[hi].classList.add('active'); }, 6000);

    /* CountDown con meses + segundos; oculta unidades = 0 */
    const countdownEl = document.getElementById('countdown');
    const target = new Date('2025-11-15T12:00:00-05:00');
    /*function addMonths(base, m){
      const y = base.getFullYear(), mon = base.getMonth()+m, d = base.getDate();
      const last = new Date(y, mon+1, 0).getDate();
      return new Date(y, mon, Math.min(d,last), base.getHours(), base.getMinutes(), base.getSeconds(), base.getMilliseconds());
    }
    function diffWithMonths(from, to){
      if (from >= to) return {months:0, days:0, hours:0, minutes:0, seconds:0};
      let months = 0, cur = new Date(from);
      while(true){ const nxt = addMonths(cur,1); if(nxt<=to){ months++; cur=nxt; } else break; }
      const ms = to - cur;
      const days = Math.floor(ms/86400000);
      const hours = Math.floor((ms%86400000)/3600000);
      const minutes = Math.floor((ms%3600000)/60000);
      const seconds = Math.floor((ms%60000)/1000);
      return {months, days, hours, minutes, seconds};
    } 
    function tick(){
      const now = new Date();
      const c = diffWithMonths(now, target);
      if (now >= target){ countdownEl.textContent = '¡Hoy es el gran día!'; return; }
      const parts = [];
      if (c.months) parts.push(`${c.months} ${c.months===1?'mes':'meses'}`);
      if (c.days) parts.push(`${c.days}d`);
      if (c.hours) parts.push(`${c.hours}h`);
      if (c.minutes) parts.push(`${c.minutes}m`);
      if (c.seconds) parts.push(`${c.seconds}s`);
      countdownEl.textContent = parts.length ? `Faltan ${parts.join(' ')}` : '';
    } */
    function tick(){
      const now = new Date();
      if (now >= target){
        countdownEl.textContent = '¡Hoy es el gran día!';
        return;
      }
      const ms = target - now;

      const days = Math.floor(ms / 86400000);
      const hours = Math.floor((ms % 86400000) / 3600000);
      const minutes = Math.floor((ms % 3600000) / 60000);
      const seconds = Math.floor((ms % 60000) / 1000);

      const parts = [];
      if (days) parts.push(`${days}d`);
      if (hours) parts.push(`${hours}h`);
      if (minutes) parts.push(`${minutes}m`);
      if (seconds) parts.push(`${seconds}s`);

      countdownEl.textContent = parts.length ? `Faltan ${parts.join(' ')}` : '';
    }
    
    tick(); setInterval(tick, 1000);

    /* Copiar al portapapeles con feedback aria-live */
    const status = document.getElementById('copyStatus');
    document.querySelectorAll('.copy').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        const text = btn.getAttribute('data-copy') || btn.textContent.trim();
        try{
          await navigator.clipboard.writeText(text);
          status.textContent = '¡Copiado!';
          setTimeout(()=> status.textContent = '', 1400);
        }catch(e){}
      });
    });

    /* Enlace .ics (UTC + METHOD + DTEND) */
    const ics = [
      'BEGIN:VCALENDAR',
      'VERSION:2.0',
      'PRODID:-//RominaJavier//Boda//ES',
      'CALSCALE:GREGORIAN',
      'METHOD:PUBLISH',
      'BEGIN:VEVENT',
      'UID:boda-romina-javier-20251115@javiersl26.github.io',
      'DTSTAMP:20250101T120000Z',
      'DTSTART:20251115T170000Z', /* 12:00 -05:00 */
      'DTEND:20251116T030000Z',   /* 22:00 -05:00 (ajustable) */
      'SUMMARY:Boda de Romina & Javier',
      'LOCATION:Parroquia Nuestra Señora del Carmen, Juan de la Fuente, Miraflores 15047, Perú',
      'DESCRIPTION:Ceremonia 12:00 p.m. — Recepción: Av. Club Golf Los Incas 222, Surco. Dress code: Elegante.',
      'END:VEVENT',
      'END:VCALENDAR'
    ].join('\\r\\n');
    const addCal = document.getElementById('addCal');
    if (addCal){
      addCal.href = 'data:text/calendar;charset=utf-8,' + encodeURIComponent(ics);
      addCal.setAttribute('type','text/calendar');
    }

    /* Lightbox para Fotos */
    const dlg = document.createElement('dialog'); dlg.id='lightbox';
    dlg.innerHTML = '<img class="lightbox-img" alt=""><form method="dialog"><button style="display:none">x</button></form>';
    document.body.appendChild(dlg);
    const lbImg = dlg.querySelector('.lightbox-img');
    document.querySelectorAll('.gallery img').forEach(img=>{
      img.addEventListener('click', ()=>{ lbImg.src = img.src; lbImg.alt = img.alt; dlg.showModal(); });
    });
    dlg.addEventListener('click', e=>{ if(e.target === dlg) dlg.close(); });

    /* Nav activa on scroll + aria-current="page" */
    const nav = document.getElementById('nav');
    const links = Array.from(nav.querySelectorAll('.nav-item'));
    const idToLink = Object.fromEntries(links.map(a=>[a.dataset.section, a]));
    const setActive = (id)=>{
      links.forEach(l=>{ l.classList.remove('active'); l.removeAttribute('aria-current'); });
      const el = idToLink[id]; if(el){ el.classList.add('active'); el.setAttribute('aria-current','page'); }
    };
    const obs = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if (entry.isIntersecting){ setActive(entry.target.id); }
      });
    }, {rootMargin:'-50% 0px -45% 0px'});

    ['detalles','ceremonia','recepcion','recuerdos','regalos','rsvp'].forEach(id=>{
      const el=document.getElementById(id); if(el) obs.observe(el);
    });
  </script>
</body>
</html>
